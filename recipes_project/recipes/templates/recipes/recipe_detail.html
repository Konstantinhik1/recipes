<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ recipe.title }}</title>
</head>
<body>
    <h1>{{ recipe.title }}</h1>
    <p>Время приготовления: {{ recipe.preparation_time }} минут</p>
    <p>Описание: {{ recipe.description }}</p>
    <p>Ингредиенты: {{ recipe.ingredients_text }}</p>
    <p>Шаги приготовления:</p>
    <ol>
        {% for step in recipe.detailed_steps.all %}
            <li>{{ step.description }}</li>
        {% endfor %}
    </ol>
    {% if recipe.image %}
        <img src="{{ recipe.image.url }}" alt="{{ recipe.title }}" width="150">
    {% endif %}
    <a href="{% url 'recipe_edit' recipe.id %}">Редактировать</a>
    <a href="{% url 'recipe_catalog' %}">Назад к каталогу</a>

    <h2>Отзывы</h2>
    <ul>
        {% for review in reviews %}
            <li>
                <strong>{{ review.author.username }}</strong>: {{ review.content }}
                <small>({{ review.created_at|date:"d.m.Y H:i" }})</small>
                {% if review.author == user %}
                    <a href="{% url 'review_edit' review.id %}">Редактировать</a>
                    <a href="{% url 'review_delete' review.id %}">Удалить</a>
                {% endif %}
            </li>
        {% empty %}
            <li>Отзывов пока нет.</li>
        {% endfor %}
    </ul>

    <h3>Добавить отзыв</h3>
    <form method="post">
        {% csrf_token %}
        {{ review_form.as_p }}
        <button type="submit">Отправить</button>
    </form>
</body>
</html>
